<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Infrastructure</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Defensive Security in the Cloud</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Defensive Security.html">01. Defensive Security</a>
    </li>
    <li class="">
      <a href="02. Common Threat Vectors.html">02. Common Threat Vectors</a>
    </li>
    <li class="">
      <a href="03. Defensive Security in the Cloud.html">03. Defensive Security in the Cloud</a>
    </li>
    <li class="">
      <a href="04. Infrastructure.html">04. Infrastructure</a>
    </li>
    <li class="">
      <a href="05. Exercise Infrastructure.html">05. Exercise: Infrastructure</a>
    </li>
    <li class="">
      <a href="06. Solution Infastructure.html">06. Solution: Infastructure</a>
    </li>
    <li class="">
      <a href="07. Identify Vulnerabilities.html">07. Identify Vulnerabilities</a>
    </li>
    <li class="">
      <a href="08. Vulnerabilities on Instances and Containers.html">08. Vulnerabilities on Instances and Containers</a>
    </li>
    <li class="">
      <a href="09. Vulnerabilities Quizzes.html">09. Vulnerabilities Quizzes</a>
    </li>
    <li class="">
      <a href="10. Exercise Vulnerabilities.html">10. Exercise: Vulnerabilities</a>
    </li>
    <li class="">
      <a href="11. Solution Vulnerabilities.html">11. Solution: Vulnerabilities</a>
    </li>
    <li class="">
      <a href="12. Security Event Monitoring.html">12. Security Event Monitoring</a>
    </li>
    <li class="">
      <a href="13. Security Event Sources.html">13. Security Event Sources</a>
    </li>
    <li class="">
      <a href="14. Security Event Quizzes.html">14. Security Event Quizzes</a>
    </li>
    <li class="">
      <a href="15. Exercise Security Event.html">15. Exercise: Security Event</a>
    </li>
    <li class="">
      <a href="16. Solution Security Event.html">16. Solution: Security Event</a>
    </li>
    <li class="">
      <a href="17. Defend Web Applications.html">17. Defend Web Applications</a>
    </li>
    <li class="">
      <a href="18. Defense Quizzes.html">18. Defense Quizzes</a>
    </li>
    <li class="">
      <a href="19. Lesson Conclusion.html">19. Lesson Conclusion</a>
    </li>
    <li class="">
      <a href="20. Course Recap.html">20. Course Recap</a>
    </li>
    <li class="">
      <a href="21. Congratulations!.html">21. Congratulations!</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">04. Infrastructure</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3><p>Checking infrastructure as code for vulnerabilities Heading</p></h3>
  <div>
  <h2 id="checking-infrastructure-as-code-for-vulnerabilities">Checking Infrastructure as Code for Vulnerabilities</h2>
<p>With any software that is developed, the cost to remediate and the impact of finding defects is much lower when identified earlier in the life cycle rather than later.</p>
<p>This also applies to code that defines cloud infrastructure or infrastructure as code.  Infrastructure as code should be tested prior to deployment to ensure that it will do what it is intended to do and to ensure that any potentially insecure configurations are identified early on.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND063 C3 L4 04 Checking Infrastructure As Code For Vulnerabilities</p></h3>
  <video controls>
  <source src="04. ND063 C3 L4 04 Checking Infrastructure As Code For Vulnerabilities-KutU6-MpB7k.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="04. ND063 C3 L4 04 Checking Infrastructure As Code For Vulnerabilities-KutU6-MpB7k.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Checking infrastructure as code for vulnerabilities Notes</p></h3>
  <div>
  <h3 id="static-code-analysis-for-infrastructure-as-code">Static Code Analysis for Infrastructure as Code</h3>
<p>Static code analysis for finding application security vulnerabilities is not a new concept. However, this concept also applies to code that defines cloud infrastructure or infrastructure as code. Infrastructure as code should be tested prior to deployment to ensure that it will do what it is intended to do and to also ensure that any potentially insecure configurations are identified early on.</p>
<p>These insecure configurations should be treated as vulnerabilities and dealt with as such.  Many times organizations will check these configurations post deployment, however it is important to add this check during the development phase to ensure that vulnerabilities are investigated and remediated.</p>
<h4 id="open-source-resources">Open Source Resources</h4>
<p>There are many open source projects which allow you to construct security policies and then check terraform or cloudformation template code for any security related configurations which are out of compliance with your security requirements as defined in the policies.</p>
<h5 id="cloudformation">CloudFormation</h5>
<ul>
<li><a href="https://github.com/Skyscanner/cfripper" rel="noopener noreferrer" target="_blank">Cfripper</a></li>
<li><a href="https://cloudsploit.com/opensource" rel="noopener noreferrer" target="_blank">Cloudsploit</a></li>
<li><a href="https://github.com/aws-cloudformation/cfn-python-lint" rel="noopener noreferrer" target="_blank">cfn-lint</a></li>
</ul>
<h5 id="terraform">Terraform</h5>
<p>Terraform is much more widely used infrastructure as code language, so there are more options including:</p>
<ul>
<li><a href="https://github.com/inspec/inspec" rel="noopener noreferrer" target="_blank">Chef inspec</a></li>
<li><a href="https://github.com/fugue/regula" rel="noopener noreferrer" target="_blank">Open policy agent / Regula</a></li>
<li><a href="https://github.com/cesar-rodriguez/terrascan" rel="noopener noreferrer" target="_blank">Terrascan</a></li>
</ul>
<p>In addition to open source options, many of the major commercial cloud security products offer infrastructure as code scanning as part of their product platform including prisma cloud, cloud conformity, fugue, terraform cloud etc.  </p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Scanning Infrastructure as Code for Vulnerabilities</p></h3>
  <div>
  <figure class="figure">
    <img src="img/5.-scanning-infrastructure-as-code-for-vulnerabilities.png" alt="
**Scan Code that Defines Cloud Infrastructure, Configuration Management, and Docker Files**" class="img img-fluid">
    <figcaption class="figure-caption">
      <p><strong>Scan Code that Defines Cloud Infrastructure, Configuration Management, and Docker Files</strong></p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Scanning Code Notes</p></h3>
  <div>
  <h4 id="additional-considerations">Additional Considerations</h4>
<p>When implementing infrastructure as code scanning in your DevOps pipeline there are a few additional considerations to keep in mind.</p>
<h5 id="scan-configuration-management-code-and-dockerfiles">Scan Configuration Management Code and DockerFiles</h5>
<p>Scanning Code for OS / VM / Docker images in addition to Cloud or AWS Configuration Docker files, Ansible, Puppet, Chef, etc should ensure that configurations are in-line with security standards that have been established by the organization.</p>
<h5 id="scan-on-code-check-in-or-prior-to-deployment">Scan on Code Check-in or Prior to Deployment</h5>
<p>This depends on the tool selected, such as, during a terraform plan.  If security related violations are found, your process should be set up to notify the appropriate parties and halt the pipeline from progressing.</p>
<h3 id="scanning-demo">Scanning Demo</h3>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>ND063 C3 L4 05 Checking Infrastructure As Code For Vulnerabilities Walkthrough</p></h3>
  <video controls>
  <source src="04. ND063 C3 L4 05 Checking Infrastructure As Code For Vulnerabilities Walkthrough-Mow8ontF9cA.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="04. ND063 C3 L4 05 Checking Infrastructure As Code For Vulnerabilities Walkthrough-Mow8ontF9cA.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Checking infrastructure as code for vulnerabilities Heading Image</p></h3>
  <div>
  <figure class="figure">
    <img src="img/6.-checking-infrastructure-as-code-for-vulnerabilities-heading-image.png" alt="
**Scan Terraform Code Using Regula for Security Compliance Prior to Deployment**" class="img img-fluid">
    <figcaption class="figure-caption">
      <p><strong>Scan Terraform Code Using Regula for Security Compliance Prior to Deployment</strong></p>
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Checking infrastructure as code for vulnerabilities Heading New Terms</p></h3>
  <div>
  <h2 id="key-terms">Key Terms</h2>
<h4 id="infrastructure-as-code-iac">Infrastructure as Code (IaC)</h4>
<p>Code that is developed to define cloud infrastructure, operating system, and container configuration.  Code is version controlled and follows the similar principles for changes and updates as application feature code.</p>
<h4 id="cloudformation">CloudFormation</h4>
<p>AWS native service for deploying services with infrastructure as code. CloudFormation templates defined in JSON or YAML can be deployed using the CloudFormation service.</p>
<h4 id="terraform">Terraform</h4>
<p>Popular infrastructure as code language from HashiCorp.  Supports many different cloud providers in addition to AWS.</p>
<h4 id="dockerfile">DockerFile</h4>
<p>Definition specifying how a docker image will be built and configured.</p>
<h4 id="devops-pipeline">DevOps Pipeline</h4>
<p>A set of processes and tools to build, deploy, and update application environments.  Pipelines include build of application artifacts, docker and VM images, scanning and automated testing, deployment orchestration of infrastructure and application artifacts.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Checking infrastructure as code for vulnerabilities Easy Quiz</p></h3>
  <div>
  <form>
    <fieldset>
      <legend><p>What might be some benefits of scanning infrastructure code prior to deployment?</p></legend>
    </fieldset>

    <div>
      <input type="checkbox" value="rbk1" name="1012703" id="rbk1">
      <label for="rbk1"><p>Identify changes to code that would lead to a vulnerability after deployment.</p></label>
    </div>
    <div>
      <input type="checkbox" value="rbk2" name="1012703" id="rbk2">
      <label for="rbk2"><p>Makes the deployment pipeline much faster.</p></label>
    </div>
    <div>
      <input type="checkbox" value="rbk3" name="1012703" id="rbk3">
      <label for="rbk3"><p>There are no benefits to this method.</p></label>
    </div>
    <div>
      <input type="checkbox" value="rbk4" name="1012703" id="rbk4">
      <label for="rbk4"><p>Time and effort to remediate is less.</p></label>
    </div>
  </form>

  <details>
    <summary><strong>SOLUTION:</strong></summary>
    <ul>
      <li>Identify changes to code that would lead to a vulnerability after deployment.</li>
      <li>Time and effort to remediate is less.</li>
  </ul>
  </details>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Checking infrastructure as code for vulnerabilities Further Research</p></h3>
  <div>
  <h3 id="additional-resources">Additional Resources</h3>
<ul>
<li><a href="https://github.com/fugue/regula" rel="noopener noreferrer" target="_blank">Regula Tool Used in Walkthrough</a></li>
</ul>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="05. Exercise Infrastructure.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('04. Infrastructure')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
